variables:
  access_token: $(System.AccessToken)

jobs:
- job:
  displayName: 'Linux'
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
  - script: |
      az --version
      az extension list-available --output table
      az extension add -n azure-devops
      az devops configure --defaults instance=$(System.TeamFoundationCollectionUri) project=$(System.TeamProject)
      az devops login --instance $(System.TeamFoundationCollectionUri) --token $(access_token) --use-git-aliases yes
      git pr list
    displayName: 'Show AZ details / install devops extension'

- job:
  displayName: 'Windows'
  pool:
    vmImage: 'vs2017-win2016'
  steps:
  - script: |
      az --version
      az extension list-available --output table
      az extension add -n azure-devops
      az devops configure --defaults instance=$(System.TeamFoundationCollectionUri) project=$(System.TeamProject)
      az devops login --instance $(System.TeamFoundationCollectionUri) --token $(access_token) --use-git-aliases yes
      git pr list
    displayName: 'Show AZ details / install devops extension'
